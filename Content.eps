import ETK.ETKUnit as Unit;
import ETK.ETKUtils as Utils;
import ETK.ETKTimer as Timer;
import ETK.ETKConstants as Const;
import ETK.ETKCommon as Common;
import Strings;
import Sound;
import Upgrades;
import Towers;

function loadData() {

	// UPGRADES
	const AirUpgradeSet6 = Common.Null;
	const FireUpgradeSet6 = Common.Null;
	const WaterUpgradeSet6 = Common.Null;
	const EarthUpgradeSet6 = Common.Null;

	const AirUpgradeSet5 = Upgrades.CreateUpgradeSet(
		Upgrades.CreateTowerUpgrade(Const.Icon_ScarabDamage, Db('q\x01[\x03Q\x01] Damage upgrade 5'), AirUpgradeSet6, [50, 0, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_PhaseDisruptor, Db('w\x01[\x03W\x01] Speed upgrade 5'), AirUpgradeSet6, [0, 50, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_U238Shells, Db('e\x01[\x03E\x01] Range upgrade 5'), AirUpgradeSet6, [0, 0, 80])
		);

	const AirUpgradeSet4 = Upgrades.CreateUpgradeSet(
		Upgrades.CreateTowerUpgrade(Const.Icon_ScarabDamage, Db('q\x01[\x03Q\x01] Damage upgrade 4'), AirUpgradeSet5, [40, 0, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_PhaseDisruptor, Db('w\x01[\x03W\x01] Speed upgrade 4'), AirUpgradeSet5, [0, 40, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_U238Shells, Db('e\x01[\x03E\x01] Range upgrade 4'), AirUpgradeSet5, [0, 0, 64])
		);

	const AirUpgradeSet3 = Upgrades.CreateUpgradeSet(
		Upgrades.CreateTowerUpgrade(Const.Icon_ScarabDamage, Db('q\x01[\x03Q\x01] Damage upgrade 3'), AirUpgradeSet4, [30, 0, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_PhaseDisruptor, Db('w\x01[\x03W\x01] Speed upgrade 3'), AirUpgradeSet4, [0, 30, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_U238Shells, Db('e\x01[\x03E\x01] Range upgrade 3'), AirUpgradeSet4, [0, 0, 48])
		);

	const AirUpgradeSet2 = Upgrades.CreateUpgradeSet(
		Upgrades.CreateTowerUpgrade(Const.Icon_ScarabDamage, Db('q\x01[\x03Q\x01] Damage upgrade 2'), AirUpgradeSet3, [20, 0, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_PhaseDisruptor, Db('w\x01[\x03W\x01] Speed upgrade 2'), AirUpgradeSet3, [0, 20, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_U238Shells, Db('e\x01[\x03E\x01] Range upgrade 2'), AirUpgradeSet3, [0, 0, 32])
		);

	const AirUpgradeSet1 = Upgrades.CreateUpgradeSet(
		Upgrades.CreateTowerUpgrade(Const.Icon_ScarabDamage, Db('q\x01[\x03Q\x01] Damage upgrade 1'), AirUpgradeSet2, [10, 0, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_PhaseDisruptor, Db('w\x01[\x03W\x01] Speed upgrade 1'), AirUpgradeSet2, [0, 10, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_U238Shells, Db('e\x01[\x03E\x01] Range upgrade 1'), AirUpgradeSet2, [0, 0, 16])
		);

	const EarthUpgradeSet5 = Upgrades.CreateUpgradeSet(
		Upgrades.CreateTowerUpgrade(Const.Icon_ScarabDamage, Db('q\x01[\x03Q\x01] Damage upgrade 5'), EarthUpgradeSet6, [105, 0, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_PhaseDisruptor, Db('w\x01[\x03W\x01] Speed upgrade 5'), EarthUpgradeSet6, [0, 30, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_U238Shells, Db('e\x01[\x03E\x01] Range upgrade 5'), EarthUpgradeSet6, [0, 0, 120])
		);

	const EarthUpgradeSet4 = Upgrades.CreateUpgradeSet(
		Upgrades.CreateTowerUpgrade(Const.Icon_ScarabDamage, Db('q\x01[\x03Q\x01] Damage upgrade 4'), EarthUpgradeSet5, [84, 0, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_PhaseDisruptor, Db('w\x01[\x03W\x01] Speed upgrade 4'), EarthUpgradeSet5, [0, 24, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_U238Shells, Db('e\x01[\x03E\x01] Range upgrade 4'), EarthUpgradeSet5, [0, 0, 96])
		);

	const EarthUpgradeSet3 = Upgrades.CreateUpgradeSet(
		Upgrades.CreateTowerUpgrade(Const.Icon_ScarabDamage, Db('q\x01[\x03Q\x01] Damage upgrade 3'), EarthUpgradeSet4, [63, 0, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_PhaseDisruptor, Db('w\x01[\x03W\x01] Speed upgrade 3'), EarthUpgradeSet4, [0, 18, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_U238Shells, Db('e\x01[\x03E\x01] Range upgrade 3'), EarthUpgradeSet4, [0, 0, 72])
		);

	const EarthUpgradeSet2 = Upgrades.CreateUpgradeSet(
		Upgrades.CreateTowerUpgrade(Const.Icon_ScarabDamage, Db('q\x01[\x03Q\x01] Damage upgrade 2'), EarthUpgradeSet3, [42, 0, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_PhaseDisruptor, Db('w\x01[\x03W\x01] Speed upgrade 2'), EarthUpgradeSet3, [0, 12, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_U238Shells, Db('e\x01[\x03E\x01] Range upgrade 2'), EarthUpgradeSet3, [0, 0, 48])
		);

	const EarthUpgradeSet1 = Upgrades.CreateUpgradeSet(
		Upgrades.CreateTowerUpgrade(Const.Icon_ScarabDamage, Db('q\x01[\x03Q\x01] Damage upgrade 1'), EarthUpgradeSet2, [21, 0, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_PhaseDisruptor, Db('w\x01[\x03W\x01] Speed upgrade 1'), EarthUpgradeSet2, [0, 6, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_U238Shells, Db('e\x01[\x03E\x01] Range upgrade 1'), EarthUpgradeSet2, [0, 0, 24])
		);

	const FireUpgradeSet5 = Upgrades.CreateUpgradeSet(
		Upgrades.CreateTowerUpgrade(Const.Icon_ScarabDamage, Db('q\x01[\x03Q\x01] Damage upgrade 5'), FireUpgradeSet6, [75, 0, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_PhaseDisruptor, Db('w\x01[\x03W\x01] Speed upgrade 5'), FireUpgradeSet6, [0, 40, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_U238Shells, Db('e\x01[\x03E\x01] Range upgrade 5'), FireUpgradeSet6, [0, 0, 70])
		);

	const FireUpgradeSet4 = Upgrades.CreateUpgradeSet(
		Upgrades.CreateTowerUpgrade(Const.Icon_ScarabDamage, Db('q\x01[\x03Q\x01] Damage upgrade 4'), FireUpgradeSet5, [60, 0, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_PhaseDisruptor, Db('w\x01[\x03W\x01] Speed upgrade 4'), FireUpgradeSet5, [0, 32, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_U238Shells, Db('e\x01[\x03E\x01] Range upgrade 4'), FireUpgradeSet5, [0, 0, 56])
		);

	const FireUpgradeSet3 = Upgrades.CreateUpgradeSet(
		Upgrades.CreateTowerUpgrade(Const.Icon_ScarabDamage, Db('q\x01[\x03Q\x01] Damage upgrade 3'), FireUpgradeSet4, [45, 0, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_PhaseDisruptor, Db('w\x01[\x03W\x01] Speed upgrade 3'), FireUpgradeSet4, [0, 24, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_U238Shells, Db('e\x01[\x03E\x01] Range upgrade 3'), FireUpgradeSet4, [0, 0, 42])
		);

	const FireUpgradeSet2 = Upgrades.CreateUpgradeSet(
		Upgrades.CreateTowerUpgrade(Const.Icon_ScarabDamage, Db('q\x01[\x03Q\x01] Damage upgrade 2'), FireUpgradeSet3, [30, 0, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_PhaseDisruptor, Db('w\x01[\x03W\x01] Speed upgrade 2'), FireUpgradeSet3, [0, 16, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_U238Shells, Db('e\x01[\x03E\x01] Range upgrade 2'), FireUpgradeSet3, [0, 0, 28])
		);

	const FireUpgradeSet1 = Upgrades.CreateUpgradeSet(
		Upgrades.CreateTowerUpgrade(Const.Icon_ScarabDamage, Db('q\x01[\x03Q\x01] Damage upgrade 1'), FireUpgradeSet2, [15, 0, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_PhaseDisruptor, Db('w\x01[\x03W\x01] Speed upgrade 1'), FireUpgradeSet2, [0, 8, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_U238Shells, Db('e\x01[\x03E\x01] Range upgrade 1'), FireUpgradeSet2, [0, 0, 14])
		);

	const WaterUpgradeSet5 = Upgrades.CreateUpgradeSet(
		Upgrades.CreateTowerUpgrade(Const.Icon_ScarabDamage, Db('q\x01[\x03Q\x01] Damage upgrade 5'), WaterUpgradeSet6, [40, 0, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_PhaseDisruptor, Db('w\x01[\x03W\x01] Speed upgrade 5'), WaterUpgradeSet6, [0, 35, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_U238Shells, Db('e\x01[\x03E\x01] Range upgrade 5'), WaterUpgradeSet6, [0, 0, 40])
		);

	const WaterUpgradeSet4 = Upgrades.CreateUpgradeSet(
		Upgrades.CreateTowerUpgrade(Const.Icon_ScarabDamage, Db('q\x01[\x03Q\x01] Damage upgrade 4'), WaterUpgradeSet5, [32, 0, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_PhaseDisruptor, Db('w\x01[\x03W\x01] Speed upgrade 4'), WaterUpgradeSet5, [0, 28, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_U238Shells, Db('e\x01[\x03E\x01] Range upgrade 4'), WaterUpgradeSet5, [0, 0, 32])
		);

	const WaterUpgradeSet3 = Upgrades.CreateUpgradeSet(
		Upgrades.CreateTowerUpgrade(Const.Icon_ScarabDamage, Db('q\x01[\x03Q\x01] Damage upgrade 3'), WaterUpgradeSet4, [24, 0, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_PhaseDisruptor, Db('w\x01[\x03W\x01] Speed upgrade 3'), WaterUpgradeSet4, [0, 21, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_U238Shells, Db('e\x01[\x03E\x01] Range upgrade 3'), WaterUpgradeSet4, [0, 0, 24])
		);

	const WaterUpgradeSet2 = Upgrades.CreateUpgradeSet(
		Upgrades.CreateTowerUpgrade(Const.Icon_ScarabDamage, Db('q\x01[\x03Q\x01] Damage upgrade 2'), WaterUpgradeSet3, [16, 0, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_PhaseDisruptor, Db('w\x01[\x03W\x01] Speed upgrade 2'), WaterUpgradeSet3, [0, 14, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_U238Shells, Db('e\x01[\x03E\x01] Range upgrade 2'), WaterUpgradeSet3, [0, 0, 16])
		);

	const WaterUpgradeSet1 = Upgrades.CreateUpgradeSet(
		Upgrades.CreateTowerUpgrade(Const.Icon_ScarabDamage, Db('q\x01[\x03Q\x01] Damage upgrade 1'), WaterUpgradeSet2, [8, 0, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_PhaseDisruptor, Db('w\x01[\x03W\x01] Speed upgrade 1'), WaterUpgradeSet2, [0, 7, 0]),
		Upgrades.CreateTowerUpgrade(Const.Icon_U238Shells, Db('e\x01[\x03E\x01] Range upgrade 1'), WaterUpgradeSet2, [0, 0, 8])
		);

	// TOWERS

	const AirTower = Towers.CreateTowerType(1,
		Towers.CreateTowerData(100, 100, 96, 35, AirUpgradeSet1),
		Towers.CreateTowerDisplayData(Const.Icon_PsiAssault, Strings.AirTowerTitle), 
		Towers.CreateTowerImageData(
			Common.MakeImage(Const.Image_STA_STS_Photon_Cannon_Overlay, 5, -12),
			Common.MakeImage(Const.Image_None, 0, 0),
			Common.MakeImage(Const.Image_Phase_Disruptor, 0, -16),
			Common.MakeImage(Const.Image_Phase_Disruptor_Hit, 0, 0)
		)
	);
	AirTower.onPlace = EUDFuncPtr (1, 0) (function(tower : Towers.Tower) {
		PlayWAV("sound\\misc\\ptesum00.wav");
		Utils.createImageSpriteAtUnitPositionWithOffset(Const.Image_Particle_Beam_Hit, tower.unit, 0, -16);
	});
	AirTower.onUpgrade = EUDFuncPtr (1, 0) (function(tower : Towers.Tower) {
		PlayWAV("sound\\protoss\\bldg\\ppbwht00.wav");
		Utils.createImageSpriteAtUnitPositionWithOffset(Const.Image_Particle_Beam_Hit, tower.unit, 0, -16);
	});
	AirTower.onFire = EUDFuncPtr (1, 0) (function(tower : Towers.Tower) {
		if(Sound.PlaySound()) { PlayWAV("sound\\bullet\\laserb.wav"); }
	});
	AirTower.onHit = EUDFuncPtr (1, 0) (function(tower : Towers.Tower) {
		// No sound, the sprite already plays a sound
	});

	const EarthTower = Towers.CreateTowerType(2,
		Towers.CreateTowerData(175, 75, 128, 75, EarthUpgradeSet1),
		Towers.CreateTowerDisplayData(Const.Icon_Spines, Strings.EarthTowerTitle), 
		Towers.CreateTowerImageData(
			Common.MakeImage(Const.Image_Seeker_Spores, 2, -18),
			Common.MakeImage(Const.Image_None, 0, 0),
			Common.MakeImage(Const.Image_Venom_Unused_Zerg_Weapon, 0, 0),
			Common.MakeImage(Const.Image_Glave_Wurm_Seeker_Spores_Hit, 0, 0)
		)
	);
	EarthTower.onPlace = EUDFuncPtr (1, 0) (function(tower : Towers.Tower) {
		PlayWAV("sound\\zerg\\bldg\\zfcwht00.wav");
		Utils.createImageSpriteAtUnitPositionWithOffset(Const.Image_Vespene_Geyser_Smoke2, tower.unit, 0, -16);
	});
	EarthTower.onUpgrade = EUDFuncPtr (1, 0) (function(tower : Towers.Tower) {
		PlayWAV("sound\\zerg\\bldg\\zchrdy00.wav");
		Utils.createImageSpriteAtUnitPositionWithOffset(Const.Image_Vespene_Geyser_Smoke2, tower.unit, 0, -16);
	});
	EarthTower.onFire = EUDFuncPtr (1, 0) (function(tower : Towers.Tower) {
		if(Sound.PlaySound()) { PlayWAV("sound\\bullet\\zgufir00.wav"); }
	});
	EarthTower.onHit = EUDFuncPtr (3, 0) (function(tower : Towers.Tower, missileUnit, targetUnit) {
		if(Sound.PlaySound()) { PlayWAV("sound\\zerg\\devourer\\goophit.wav"); }
	});

	const FireTower = Towers.CreateTowerType(3,
		Towers.CreateTowerData(125, 80, 112, 96, FireUpgradeSet1),
		Towers.CreateTowerDisplayData(Const.Icon_FlameThrower, Strings.FireTowerTitle), 
		Towers.CreateTowerImageData(
			Common.MakeImage(Const.Image_Maelstrom_Overlay_Small, 2, -18),
			Common.MakeImage(Const.Image_None, 0, 0),
			Common.MakeImage(Const.Image_Burst_Lasers_Hit, 0, -16),
			Common.MakeImage(Const.Image_Yamato_Gun_Hit, 0, 0)
		)
	);
	FireTower.onPlace = EUDFuncPtr (1, 0) (function(tower : Towers.Tower) {
		PlayWAV("sound\\misc\\onfirsml.wav");
		Utils.createImageSpriteAtUnitPositionWithOffset(Const.Image_Nuclear_Missile_Death, tower.unit, 6, -12);
	});
	FireTower.onUpgrade = EUDFuncPtr (1, 0) (function(tower : Towers.Tower) {
		PlayWAV("sound\\protoss\\darchon\\feedback.wav");
		Utils.createImageSpriteAtUnitPositionWithOffset(Const.Image_Nuclear_Missile_Death, tower.unit, 6, -12);
	});
	FireTower.onFire = EUDFuncPtr (1, 0) (function(tower : Towers.Tower) {
		if(Sound.PlaySound()) { PlayWAV("sound\\terran\\firebat\\tfbfir01.wav"); }
	});
	FireTower.onHit = EUDFuncPtr (3, 0) (function(tower : Towers.Tower, missileUnit, targetUnit) {
		Utils.dealDamageToUnitsAtLocation(tower.damage/4, Utils.centerLocationOnUnit(Utils.LOCATION_ANYSIZE, targetUnit, 64, 64), $P7);
		// if (Unit.getPlagueTimer(targetUnit) == 0) {
		// 	Utils.createOverlayForUnit(targetUnit, Const.Image_Flames2_Type3_Small, 64);
		// 	Unit.setPlagueTimer(targetUnit, 64);
		// 	PlayWAV("sound\\misc\\onfirsml.wav");
		// }
	});

	const WaterTower = Towers.CreateTowerType(4,
		Towers.CreateTowerData(100, 50, 64, 75, WaterUpgradeSet1),
		Towers.CreateTowerDisplayData(Const.Icon_ArgusJewel, Strings.WaterTowerTitle), 
		Towers.CreateTowerImageData(
			Common.MakeImage(Const.Image_Scanner_Sweep_Hit, -16, -18),
			Common.MakeImage(Const.Image_None, 0, 0),
			Common.MakeImage(Const.Image_Hallucination_Death3, 0, 0),
			Common.MakeImage(Const.Image_None, 0, 0)
		)
	);
	WaterTower.onPlace = EUDFuncPtr (1, 0) (function(tower : Towers.Tower) {
		PlayWAV("sound\\protoss\\bldg\\ppywht00.wav");
		Utils.createImageSpriteAtUnitPositionWithOffset(Const.Image_Grenade_Shot_Smoke, tower.unit, -2, -18);
	});
	WaterTower.onUpgrade = EUDFuncPtr (1, 0) (function(tower : Towers.Tower) {
		PlayWAV("sound\\protoss\\bldg\\pciwht00.wav");
		Utils.createImageSpriteAtUnitPositionWithOffset(Const.Image_Grenade_Shot_Smoke, tower.unit, -2, -18);
	});
	WaterTower.onFire = EUDFuncPtr (1, 0) (function(tower : Towers.Tower) {
		if(Sound.PlaySound()) { PlayWAV("sound\\bullet\\zdeatt00.wav"); }
	});
	WaterTower.onHit = EUDFuncPtr (3, 0) (function(tower : Towers.Tower, missileUnit, targetUnit) {
		if(Sound.PlaySound()) { PlayWAV("sound\\bullet\\zbghit00.wav"); }
		if (Unit.getEnsnareTimer(targetUnit) == 0) {
			const duration = 64;
			Unit.setEnsnareTimer(targetUnit, duration);
			const slowSpeed = 100;//Unit.getOriginalTopSpeed(targetUnit) / 10;
			Unit.setTopSpeed(targetUnit, slowSpeed);
			Utils.createOverlayForUnit(targetUnit, Const.Image_Acid_Spores_6_9_Overlay_Small, duration);
			Timer.add(duration, targetUnit, EUDFuncPtr (2, 0) (function(callbackUnit, intervalCount) {
				Unit.restoreOriginalTopSpeed(callbackUnit);
			}));
		}
	});
}