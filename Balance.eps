// https://docs.google.com/spreadsheets/d/1tQpoyDmUKzHFPRX1ta3gA76gXCKoZPZBhjQbcVU-Av0/edit#gid=1673362602

const DifficultyTable = [
	0,
	100,
	376,
	1132,
	3224,
	9178,
	26756
]; 

/*
15*100^2+1500*100 = 300000

Floor(300000*35/100/26756) = 3
300000-(3*26756) = 219732

Floor(219732*45/100/9178) = 10
219732-(10*9178) = 127952

Floor(127952*55/100/3224) = 21
127952-(21*3224) = 60248
*/

function CalculateTargetDifficulty(wave) {
	return (15*(wave*wave))+(1500*wave);
}

function CalculateTierSpawnCount(wave, tier) {
	const waveTargetDifficulty = CalculateTargetDifficulty(wave);
	tier = 6;

	var tierMultiplier;
	if (tier > 1) { tierMultiplier = 95 - (tier * 10);}
	else { tierMultiplier = 1; }

	var tierDifficulty = DifficultyTable[tier];
	return ((waveTargetDifficulty * tierMultiplier) / 100) / tierDifficulty;
}

function CalculateTierTargetDifficulty(wave, tier) {
	tier = 6;
	const waveTargetDifficulty = CalculateTargetDifficulty(wave);
	var tierDifficulty = DifficultyTable[tier];
	var tierSpawnCount = CalculateTierSpawnCount(wave, tier);
	return waveTargetDifficulty - (tierSpawnCount * tierDifficulty);
}

function calc(wave) {
	var difficulty = 15*wave*wave+1500*wave;// = 300000

	var tier6Count = Math.floor(difficulty*35/100/DifficultyTable[6]); // = 3
	difficulty = difficulty-(tier6Count*DifficultyTable[6]); // = 219732

	var tier5Count = Math.floor(difficulty*45/100/DifficultyTable[5]); //= 10
	difficulty = difficulty-(tier5Count*DifficultyTable[5]); // = 127952

	var tier4Count = Math.floor(difficulty*55/100/DifficultyTable[4]); //= 21
	difficulty = difficulty-(tier4Count*DifficultyTable[4]); // = 6024

	var tier3Count = Math.floor(difficulty*65/100/DifficultyTable[3]); 
	difficulty = difficulty-(tier3Count*DifficultyTable[3]); 

	var tier2Count = Math.floor(difficulty*75/100/DifficultyTable[2]); 
	difficulty = difficulty-(tier2Count*DifficultyTable[2]); 

	var tier1Count = Math.floor(difficulty/DifficultyTable[1]); 
	difficulty = difficulty-(tier1Count*DifficultyTable[1]); 

	return [difficulty, tier1Count, tier2Count, tier3Count, tier4Count, tier5Count, tier6Count];
}